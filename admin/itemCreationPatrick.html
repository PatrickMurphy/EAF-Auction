<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html>
	<head>
		<title>
			AEF Create Item
		</title>
		<script src="jquery-1.10.0.min.js">
		</script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js">
		</script>
		<script src="javascript.js" type="text/javascript">
		</script>
		<link href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css" rel="stylesheet" type="text/css"/>
		<link href="stylesheet.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript">
			/** Displays the custom bid-increment text fields.
			 * @param {String} Value of the html 'select' object.
			 * @return {Boolean} If the value is 'custom' return true, otherwise false.
			 */

			function isCustomInc(value) {
				if ("custom" == value) $(".custInc").css("visibility", "visible");
				else
				$(".custInc").css("visibility", "hidden");

				return "custom" == value;
			}

			/** Validates each of the 5 custom bid-increment fields.
			 * @return {Boolean} Returns true if all 5 fields are valid, false otherwise.
			 */

			function validateCustInc() {
				// Clear the error text.
				$("#custIncError").empty();
				var isValid = true;
				for (i = 0; i < $(".incField").length; i++)
				if (!validateMoney($(".incField").eq(i).get(0))) {
					// Display the error message.
					$("#custIncError").text("Not a number.");
					isValid = false;
				}

				return isValid;
			}

			/** Validates the 'Retail Value' field.
			 * @return {Boolean} Returns true if the field is valid, false otherwise.
			 */

			function validateRetailValue() {
				$("#retailValueError").empty();
				var isValid = true;
				if (!validateMoney($("#retailValue").get(0))) {
					$("#retailValueError").text("Not a number.");
					isValid = false;
				}

				return isValid;
			}

			/** Validates a text field that accepts a dollar amount.
			 * @param {HTML Object} object.
			 * @return {Boolean} Returns true if the field is valid, false otherwise.
			 */

			function validateMoney(object) {
				// Remove the '$' symbol if the user entered it.
				if ('$' == object.value[0]) {
					var string = new String(object.value);
					object.value = string.substr(1);
				}

				// Verify the input is an actual number.
				return invalidateField(object, !isNaN(object.value))
			}

			/** Adds the 'invalid' class to the object is isValid is false (giving the object a red border), removes the 'invalid' class otherwise.
			 * @param {HTML Object} object.
			 * @param {Boolean} isValid.
			 * @return {Boolean} Return isValid.
			 */

			function invalidateField(object, isValid) {
				// Create a jQuery object to access the class functions.
				object = $(object);

				if (isValid) object.removeClass("invalid");
				else
				object.addClass("invalid");

				return isValid;
			}

			/** Returns whether or not the string contains a valid time format (hh:mm).
			 * @param {String} string.
			 * @return {Boolean}
			 */

			function isValidTime(string) {
				return RegExp("^([0-9]{1,2})[^(0-9){1}]([0-9]{0,2})$").test(string);
			}

			/** Returns whether or not the string contains a valid date format (mm/dd/yyyy).
			 * @param {String} string.
			 * @return {Boolean}
			 */

			function isValidDate(string) {
				return RegExp("^([0-9]{1,2})[^(0-9)]([0-9]{1,2})[^(0-9)]([0-9]{2,4})$").test(string);
			}

			/** Validates a text field that accepts a date string.
			 * @param {HTML Object} object.
			 * @return {Boolean} Returns true if the date is valid, false otherwise.
			 */

			function validateDate(object) {
				$("#" + object.id + "Error").empty();
				var isValid = true;
				if (!invalidateField($("#" + object.id), isValidDate(object.value))) {
					$("#" + object.id + "Error").text("Invalid Date.");
					isValid = false;
				}

				return isValid;
			}

			/** Validates a text field that accepts a time string.
			 * @param {HTML Object} object.
			 * @return {Boolean} Returns true if the time is valid, false otherwise.
			 */

			function validateTime(object) {
				$("#" + object.id + "Error").empty();
				var isValid = true;
				if (!invalidateField($("#" + object.id), isValidTime(object.value))) {
					$("#" + object.id + "Error").text("Invalid Time.");
					isValid = false;
				}

				return isValid;
			}

			/** Queries the server if the closing time slot is available (i.e. has 10 or less items closing within 10 minutes of the selected time).
			 * @param {String} date string + time string + AM|PM
			 * @return {Boolean} Returns true if the slot is open, false otherwise.
			 */

			function isAvailableEndTimeSlot(timeDateString) {
				// TODO: AJAX STUFF
				return false; // Stand-in for actual function.
			}

			/** Determines whether or not the closing time slot is available, displays a warning message if not. */

			function validateEndTimeSlot() {
				if (isAvailableEndTimeSlot("")) {
					$("#endTimeWarning").clear();
				} else
				$("#endTimeWarning").text("Ten items are set to close at this time.");
			}

			/** Finds the nearest open closing time-slot to the one currently entered in the end-time input field, and places it in the input field */

			function generateEndTime() {
				// TODO: AJAX STUFF
				$("#endTime").get(0).value = Math.floor(Math.random() * 12 + 1) + ":" + Math.floor(Math.random() * 5) + "0"; // Stand-in for actual function.
			}

			/** Generates an item ID that hasn't already been entered into the database. */

			function generateUniqueID() {
				// TODO: AJAX STUFF
				$("#itemID").get(0).value = Math.floor(Math.random() * 100000); // Stand-in for actual function.
			}

			/** Validates each form for submission. */

			function validateCreateItem() {
				// Title.
				$("#titleError").text("");
				if (!invalidateField($("#title").get(0), $("#title").get(0).value != "")) {
					$("#titleError").text("Item must have a title.");
				}

				// Retail Value.
				if (validateRetailValue()) {}

				// Start time.
				if (validateDate($("#startDate").get(0))) {}
				if (validateTime($("#startTime").get(0))) {}

				// End Time.
				if (validateDate($("#endDate").get(0))) {}
				if (validateTime($("#endTime").get(0))) {}

				// Bid Increments.
				if (isCustomInc($("#bidInc").get(0).value)) {}
			}


			function navPanel(object) {
				$(object).next().slideToggle();
			}

			function hideMenus() {
				$(".menu").hide(0);
			}
		</script>
	</head>
	<body onload="hideMenus();">
		<div id="main">
			<div id="adminBanner">
				<div id="adminBannerLogo">
				</div>
				<div id="adminBannerText">
					AEF Admin
				</div>
				<div id="searchButton">
					Search
				</div>
				<input id="searchBar" type="text" />
			</div>
			<div id="navigation">
				<a class="left" href="index.html">Home</a>
				<a class="left" href="index.html">Browse</a>
				<a class="left" href="index.html">News</a>
				<span class="navCapLeft left">
				</span>
				<a class="right" href="index.html">Register</a>
				<a class="right" href="index.html">Login</a>
				<span class="navCapRight right">
				</span>
			</div>
			<div id="page">
				<div class="navPanel column">
					<div class="navPanelHeader">
						Admin
					</div>
					<div onclick="navPanel(this)">
						User Management
					</div>
					<div class="menu">
						<a href="">View All Users</a>
						<br/>
						<a href="">View User Details</a>
						<br/>
						<a href="">Add User</a>
						<br/>
						<a href="">Edit User</a>
						<br/>
					</div>
					<div onclick="navPanel(this)">
						Item Management
					</div>
					<div class="menu">
						<a href="">Create Items</a>
						<br/>
						<a href="">View Items</a>
						<br/>
						<a href="">Edit Item</a>
						<br/>
						<a href="">Hot Items</a>
						<br/>
					</div>
					<div onclick="navPanel(this)">
						Category Management
					</div>
					<div class="menu">
						<a href="">Create Category</a>
						<br/>
						<a href="">View Category</a>
						<br/>
						<a href="">Edit Category</a>
						<br/>
					</div>
					<div onclick="navPanel(this)">
						Reports & Archives
					</div>
					<div class="menu">
						<a href="">View Statistics</a>
						<br/>
						<a href="">View Archives</a>
						<br/>
					</div>
					<div onclick="navPanel(this)">
						Site Configuration
					</div>
				</div>
				<div class="formPanel column">
					<div class="formPanelHeader">
						Create Item
					</div>
                    <div class="column" style="width:50%;">
					<!-- Title Input -->
					<label for="title">
						Title
					</label>
					<br/>
					<input id="title" type="text" style="width:95%;" />
					<span id="titleError" class="errorMsg">
					</span>
                    </div>
                    <div class="column" style="width: 49%;">
                        <label for="categories">Categories</label><br />
                        <input id="categories" type="text" /></div>
					<br/>
					<!-- Description Input -->
					<label for="description">
						Description
					</label>
					<br/>
					<textarea id="description" rows="8" style="width:93%;">
					</textarea>
					<br/>
					<!-- Left Column -->
					<div class="column" style="margin-right:0; width:55%;">
						<label for="company">
							Company
						</label>
						<br/>
						<input id="company" type="text" style="margin-right:36px;" />
						<br />
						<br />
						<label for="startDate">
							Start Date
						</label>
						<br/>
						<!-- Start Time/Date Input -->
						<input style="width: 56.5%; margin-right:0px;" id="startDate" class="datePick" onchange="validateDate(this)" placeholder="mm/dd/yyyy" type="text" value="10/14/2013" size="8" />
						<input id="startTime" onchange="validateTime(this)" placeholder="00:00 AM" value="08:30 PM" size="7" />
						<!-- Start Time/Date Error -->
						<span id="startDateError" class="errorMsg">
						</span>
						<span id="startTimeError" class="errorMsg">
						</span>
						<br/>
						<label for="endDate">
							End Date
							<span class="shuffle-icon" style="height: 16px; width:16px;" title="Chooses an available time slot nearest the one currently in the 'End Time' text field." onclick="generateEndTime();">
								Generate End Time
							</span>
						</label>
						<br/>
						<!-- End Time/Date Input -->
						<input style="width: 56.5%; margin-right:0px;" id="endDate" class="datePick" onchange="if(validateDate(this))validateEndTimeSlot();" placeholder="mm/dd/yyyy" type="text" value="11/01/2013" size="8" style=""
						/>
						<input id="endTime" onchange="if(validateTime(this))validateEndTimeSlot();" type="text" placeholder="00:00 AM" value="08:30 PM" size="7" />
						<br/>
						<span id="endDateError" class="errorMsg">
						</span>
						<span id="endTimeError" class="errorMsg">
						</span>
						<span id="endTimeWarning" class="warningMsg">
						</span>
						<label for="itemID">
							Item ID #
						</label>
						<br/>
						<!-- Item ID Input -->
						<div class="input-sideButton">
							<input id="itemID" type="text" size="5" />
							<span class="shuffle-icon" onclick="generateUniqueID();" title="Generates a unique ID number not currently in the database.">
								Generate Unique ID
							</span>
						</div>
						<!-- Radios -->
						
						<div id="shippableSet" style="display: inline-block;">
							<label for="shippableSet">
								Shippable
							</label>
							<br />
							<input type="radio" id="radio1" name="radio[shippable]" checked="checked" />
							<label for="radio1">
								Yes
							</label>
							<input type="radio" id="radio2" name="radio[shippable]" />
							<label class="notSelected" for="radio2">
								No
							</label>
						</div>
					
						<div id="usedSet" style="display: inline-block;">
							<label for="usedSet">
								Used
							</label>
							<br />
							<input type="radio" id="radio3" name="radio[used]" checked="checked" />
							<label for="radio3">
								Yes
							</label>
							<input type="radio" id="radio4" name="radio[used]" />
							<label class="notSelected" for="radio4">
								No
							</label>
						</div>
     	                                             
					</div>
					<!-- Input Fields -->
					<div class="column" style="width:44%;">
						<!-- Comapny Name Input and Comapny Website Input -->
						<label for="companyWebsite">
							Website
						</label>
						<br />
						<input id="companyWebsite" style="margin-left:8px;" type="text" />
						<br />
						<br />
						<label for="retailValue">
							Retail Value
						</label>
						<br/>
						<!-- Retail Value Input -->
						<input id="retailValue" class="dollar" onchange="validateRetailValue();" value="0.00" type="text" size="5" name="retailValue" />
						<span id="retailValueError" class="errorMsg">
						</span>
						<br />
						<label for="itemID">
							Reserve Price
						</label>
						<br/>
						<!-- Reserve Value Input -->
						<input id="retailValue" class="dollar" value="0.00" type="text" size="5" name="retailValue" />
						<span id="retailValueError" class="errorMsg">
						</span>
						<br />
						<label for="bidInc">
							Bid Increments
						</label>
						<select id="bidInc" onchange="isCustomInc(this.value);">
							<option value="0">
								$1, $3, $5, $10, $50
							</option>
							<option value="1">
								$5, $10, $20, $50, $100
							</option>
							<option value="2">
								$10, $25, $50, $100, $250
							</option>
							<option value="3">
								$50, $100, $250, $500, $1000
							</option>
							<option value="custom">
								Custom...
							</option>
						</select>
                        <label for="images">Images</label><br />
                        <span class="button button-inline upload-images">Upload & Manage</span>
					</div>
					<br/>
					<br/>
					<br />
                    <div id="images-dialog" title="Manage Images"> 
                        <div class="column"><img src="../item_1.jpg" /></div>
                        <div class="column" style="width:300px;">
                            <div style="width: 100%;">Files: <span class="right button" id="images-dialog-upload-button" style="text-size:62.5%;">Upload</span></div>
                            <ul>
                                <li>image1.jpg<span class="right delete-icon" style="height: 16px; width:16px;" title="Are you sure you want to delete this image?">
								Delete
							</span></li>
                                <li>image2.jpg<span class="right delete-icon" style="height: 16px; width:16px;" title="Are you sure you want to delete this image?">
								Delete
							</span></li>
                                <li>image3.jpg<span class="right delete-icon" style="height: 16px; width:16px;" title="Are you sure you want to delete this image?">
								Delete
							</span></li>
                                <li>image4.jpg<span class="right delete-icon" style="height: 16px; width:16px;" title="Are you sure you want to delete this image?">
								Delete
							</span></li>
                            </ul>
                        </div>
                        <span class="button" style="position: absolute; right:0px; bottom:0px;" onclick="$('#images-dialog').dialog('close')">Save & Close</span>
                    </div>
					<!-- Form Buttons -->
					<div id="formButtonRow">
						<span class="button medium yellow">
							Save as Draft
						</span>
						<span class="button medium orange" onclick="validateCreateItem()">
							Submit
						</span>
						<span class="button medium orange" onclick="validateCreateItem()" title="Submits the item, but reloads the page with the same information, allowing identical or similiar items to be created with only minor changes.">
							Submit and keep form data
						</span>
						<span class="button medium green">
							Preview
						</span>
					</div>
				</div>
			</div>
			<div id="bottomBar">
				© Alaska Airlines Employee Assistance Fund 2013. All Rights Reserved.
				<span class="bottomBarNav">
					<a href="">News</a>
					|
					<a href="">Browse</a>
					|
					<a href="">Home</a>
				</span>
			</div>
	</body>

</html>